!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.Blazy=e()}(this,function(){"use strict";var d,l,v,f,m="srcset";return function(t){if(!document.querySelectorAll){var i=document.createStyleSheet();document.querySelectorAll=function(t,e,o,n,s){for(s=document.all,e=[],o=(t=t.replace(/\[for\b/gi,"[htmlFor").split(",")).length;o--;){for(i.addRule(t[o],"k:v"),n=s.length;n--;)s[n].currentStyle.k&&e.push(s[n]);i.removeRule(0)}return e}}var o=this,e=o._util={};e.elements=[],e.destroyed=!0,o.options=t||{},o.options.error=o.options.error||!1,o.options.offset=o.options.offset||100,o.options.root=o.options.root||document,o.options.success=o.options.success||!1,o.options.selector=o.options.selector||".b-lazy",o.options.separator=o.options.separator||"|",o.options.containerClass=o.options.container,o.options.container=!!o.options.containerClass&&document.querySelectorAll(o.options.containerClass),o.options.errorClass=o.options.errorClass||"b-error",o.options.breakpoints=o.options.breakpoints||!1,o.options.loadInvisible=o.options.loadInvisible||!1,o.options.successClass=o.options.successClass||"b-loaded",o.options.validateDelay=o.options.validateDelay||25,o.options.saveViewportOffsetDelay=o.options.saveViewportOffsetDelay||50,o.options.srcset=o.options.srcset||"data-srcset",o.options.src=d=o.options.src||"data-src",f=Element.prototype.closest,v=1<window.devicePixelRatio,(l={}).top=0-o.options.offset,l.left=0-o.options.offset,o.revalidate=function(){n(o)},o.load=function(t,e){var o=this.options;t&&void 0===t.length?r(t,e,o):z(t,function(t){r(t,e,o)})},o.destroy=function(){var e=o._util;o.options.container&&z(o.options.container,function(t){k(t,"scroll",e.validateT)}),k(window,"scroll",e.validateT),k(window,"resize",e.validateT),k(window,"resize",e.saveViewportOffsetT),e.count=0,e.elements.length=0,e.destroyed=!0},e.validateT=A(function(){s(o)},o.options.validateDelay,o),e.saveViewportOffsetT=A(function(){p(o.options.offset)},o.options.saveViewportOffsetDelay,o),p(o.options.offset),z(o.options.breakpoints,function(t){if(t.width>=window.screen.width)return d=t.src,!1}),setTimeout(function(){n(o)})};function n(t){var e=t._util;e.elements=function(t){for(var e=[],o=t.root.querySelectorAll(t.selector),n=o.length;n--;e.unshift(o[n]));return e}(t.options),e.count=e.elements.length,e.destroyed&&(e.destroyed=!1,t.options.container&&z(t.options.container,function(t){T(t,"scroll",e.validateT)}),T(window,"resize",e.saveViewportOffsetT),T(window,"resize",e.validateT),T(window,"scroll",e.validateT)),s(t)}function s(t){for(var e=t._util,o=0;o<e.count;o++){var n=e.elements[o];(i(n,t.options)||C(n,t.options.successClass))&&(t.load(n),e.elements.splice(o,1),e.count--,o--)}0===e.count&&t.destroy()}function i(t,e){var o=t.getBoundingClientRect();if(e.container&&f){var n=t.closest(e.containerClass);if(n){var s=n.getBoundingClientRect();if(u(s,l)){var i=s.top-e.offset,r=s.right+e.offset,c=s.bottom+e.offset,a=s.left-e.offset;return u(o,{top:i>l.top?i:l.top,right:r<l.right?r:l.right,bottom:c<l.bottom?c:l.bottom,left:a>l.left?a:l.left})}return!1}}return u(o,l)}function u(t,e){return t.right>=e.left&&t.bottom>=e.top&&t.left<=e.right&&t.top<=e.bottom}function r(t,e,o){if(!C(t,o.successClass)&&(e||o.loadInvisible||0<t.offsetWidth&&0<t.offsetHeight)){var n=y(t,d)||y(t,o.src);if(n){var s=n.split(o.separator),i=s[v&&1<s.length?1:0],r=y(t,o.srcset),c=b(t,"img"),a=t.parentNode,l=a&&b(a,"picture");if(c||void 0===t.src){var f=new Image,u=function(){o.error&&o.error(t,"invalid"),E(t,o.errorClass),k(f,"error",u),k(f,"load",p)},p=function(){c?l||w(t,i,r):t.style.backgroundImage='url("'+i+'")',h(t,o),k(f,"load",p),k(f,"error",u)};l&&(f=t,z(a.getElementsByTagName("source"),function(t){g(t,m,o.srcset)})),T(f,"error",u),T(f,"load",p),w(f,i,r)}else t.src=i,h(t,o)}else b(t,"video")?(z(t.getElementsByTagName("source"),function(t){g(t,"src",o.src)}),t.load(),h(t,o)):(o.error&&o.error(t,"missing"),E(t,o.errorClass))}}function h(e,t){E(e,t.successClass),t.success&&t.success(e),a(e,t.src),a(e,t.srcset),z(t.breakpoints,function(t){a(e,t.src)})}function g(t,e,o){var n=y(t,o);n&&(c(t,e,n),a(t,o))}function w(t,e,o){o&&c(t,m,o),t.src=e}function c(t,e,o){t.setAttribute(e,o)}function y(t,e){return t.getAttribute(e)}function a(t,e){t.removeAttribute(e)}function b(t,e){return t.nodeName.toLowerCase()===e}function C(t,e){return-1!==(" "+t.className+" ").indexOf(" "+e+" ")}function E(t,e){C(t,e)||(t.className+=" "+e)}function p(t){l.bottom=(window.innerHeight||document.documentElement.clientHeight)+t,l.right=(window.innerWidth||document.documentElement.clientWidth)+t}function T(t,e,o){t.attachEvent?t.attachEvent&&t.attachEvent("on"+e,o):t.addEventListener(e,o,{capture:!1,passive:!0})}function k(t,e,o){t.detachEvent?t.detachEvent&&t.detachEvent("on"+e,o):t.removeEventListener(e,o,{capture:!1,passive:!0})}function z(t,e){if(t&&e)for(var o=t.length,n=0;n<o&&!1!==e(t[n],n);n++);}function A(e,o,n){var s=0;return function(){var t=+new Date;t-s<o||(s=t,e.apply(n,arguments))}}}),$(document).ready(function(){new Blazy});